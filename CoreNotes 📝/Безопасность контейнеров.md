___
Теги: #plan 
Дата создания: 2023-08-24 11:27 
Последнее изменение: четверг 24-го августа 2023 11:27:28
<< [[2023-08-23]] | [[2023-08-25]] >> 
___
## Шпаргалка по запуску контейнеров

Шпаргалка по безопасному запуску контейнеров %%неплохо было бы перевести%%

![[Docker-Security-Cheatsheet_hp8lh3.pdf]]

## Пользователи

Всегда используйте непривилегированного пользователя

По умолчанию процесс внутри контейнера **запускается от root** (id = 0).

Для реализации принципа наименьших привилегий вы должны настроить пользователя. Сделать это можно двумя способами:

- Указать с помощью параметра `-u` произвольный ID пользователя, которого нет в запущенном контейнере:
    

```
docker run -u 4000 <image>
```

> Примечание: если впоследствии вам понадобится смонтировать файловую систему, то для получения доступа к файлам вам потребуется сопоставить используемый ID пользователя с пользователем хоста.

- Или заранее создать пользователя в Dockerfile:

```
FROM <базовый образ>
RUN addgroup -S appgroup </span>
 && adduser -S appuser -G appgroup 

USER appuser
... <продолжение Dockerfile> ...
```
## Сеть

`docker0` — это сетевой мост, который создается автоматически и используется для изоляции сети хоста от сети контейнера.

По умолчанию контейнеры подключаются к сети `docker0` и могут взаимодействовать друг с другом.

Лучше всегда отключать это поведение по умолчанию через параметр `--bridge=none`, и создавать отдельные сети для каждого соединения с помощью команды:

```bash
docker network create <network_name>

docker run --network=<network_name>
```

Схема подключения для WEB-приложения, использующего БД:

![[Pasted image 20230824121956.png]]
## Сканирование на уязвимости и секреты

И последнее, но не менее важное: надеюсь, теперь стало понятно, что ваши контейнеры настолько безопасны, насколько безопасно выполняемое в них программное обеспечение. Для проверки на уязвимости есть много разных инструментов как платных, так и бесплатных.

Сканеры уязвимостей:
- [Clair](https://github.com/quay/clair)
- [Trivy](https://github.com/aquasecurity/trivy)
- [Docker Bench for Security](https://github.com/docker/docker-bench-security)


___
### Zero-Links
- [[00 Docker]] [[00 Безопасность]]

### Links
- 
