## Что такое Git и зачем он нужен?

Git - это консольная утилита, для отслеживания и ведения истории изменения файлов, в вашем проекте. Чаще всего его используют для кода, но можно и для других файлов. Например, для картинок - полезно для дизайнеров.

С помощью Git-a вы можете откатить свой проект до более старой версии, сравнивать, анализировать или сливать свои изменения в репозиторий.

Репозиторием называют хранилище вашего кода и историю его изменений. Git работает локально и все ваши репозитории хранятся в определенных папках на жестком диске.

Каждая точка сохранения вашего проекта носит название **коммит (commit)**. У каждого commit-a есть **hash (уникальный id) и комментарий.** Из таких commit-ов собирается ветка **(branch)**. **Ветка** - это история изменений. У каждой ветки есть свое название. Репозиторий может содержать в себе несколько веток, которые создаются из других веток или вливаются в них.

## Как работает

Ниже приведено наглядное отображение работы коммитов внутри виток. Если посмотреть на него, то становится намного проще понять как это все работает. Каждый кружок, это коммит. Стрелочки показывают направление, из какого commit сделан следующий. Например `C3` сделан из `С2` и т. д. Все эти коммиты находятся в ветке под названием `main`. Это основная ветка, чаще всего ее называют `master` . Прямоугольник `main*` показывает в каком commit мы сейчас находимся.
В конечном итоге, получается простой однонаправленный граф состоящий из одной ветки `main`, который в свою очередь стоит из четырех коммитов.

![[Pasted image 20231220111207.png]]

Однако более частой практикой является ведение нескольких веток (от разных пользователей или с дополнительными фиксами и/или функциями) как например ниже

![[Pasted image 20231220111910.png]]

## Порядок работы с Git

### Установка Git

Первым делом, нам необходимо скачать и установить **Git**.
Подробнее про установку Git можете прочитать в статье **ХХХ**.

### Инициализация репозитория на сервера Git

>[!info]
>В данном примере, я буду использовать **GitLab**, поскольку данная статья пишется в связке по работе именно с ним. Однако все описанные ниже команды и алгоритм работы также будут релевантны и при работе с иными Git хранилищами, такими как GitHub, BitBucket и тд

Находясь на нашем **GitLab'е**, необходимо нажать кнопку "**New Project**", в верхнем правом углу.

![[Pasted image 20231220115525.png]]

Далее жмем самую верхнюю кнопку "**Create blank project**" и нас встречает следующее окно: 

![[asd.jpg]]

Подробно пройдемся по всем полям, чтобы было понятно что и как отмечать.

1. **Project name** - Имя вашего проекта. Оно должен отражать **основную функцию** проекта (парсер/генератор/конфигуратор и тд)
2. **Project URL** - Местоположение вашего проекта, а именно **персональное** или **групповое**, о чем расказанно в **ХХХ**
3. **Visibility Level** - Уровни видимости проекта. Если Вашим проектом должны пользоваться другие люди, следует ставить видимость **Public**, иначе - **Private**
4. **Project Configuration** - Конфигурация проектов. Здесь мы отмечаем только инициализацию Readme файла.

В конечном итоге, у вас получится нечто подобное:

![[Pasted image 20231220120752.png]]

После успешной настройки проекта, нажимаем на кнопку "**Create project**" в нижем левом углу.

Поздравляю, Вы создали свой репозиторий. Далее нам необходимо связать созданный на сервере репозиторий с **Git**, который установлен на вашем **ПК**. 
### Инициализация локального пользователя и репозитория

#### Сложный путь

В данном случае, инициализация будет проходить вручную и займет чуть больше времени.

После установки, нам необходимо инициализировать пользователя заменяя поля ***Your_name и Your_email***.

```sh
git config --global user.name <Your_name>
git conifg --global user.email <Your_email>
```

>[!info]- Что делать, если я использую несколько Git хранилищ ?
> В таком случае, вам необходимо будет инициализировать пользователя *git* для каждого отдельного репозитория. Для этого необходимо перейти в созданный локально репозиторий и прописать:
> ```sh
git config user.name <Your_name>
git conifg user.email <Your_email>```

Далее, необходимо перейти в папку, которую планируем использовать в кач-ве репозитория и прописать комманду инициализации **Git** в указанной папке:

```sh
git init
```

Отлично, далее необходимо указать к какому репозиторию мы подключаемся при помощи команды:

```sh
git remote add origin ssh://git@gitlab.ysts.ru:4444/<group>/<project_name>.git
```

>[!warning]
>Важно указать **именно** формат подключения через **ssh**, а не **https**, иначе при каждом пуше **(push)**, вам придется указывать свои креды для подключения.

Данная команда укажет, что локальный созданный репозиторий будет обмениваться данными с репозиторием, который расположен по вышеуказанной ссылке, а так же укажет протокол для обмена данными (ssh|https).

#### Легкий путь

Данный путь сократит время на инициализацию и автоматически свяжет локального и удаленного пользователя.

В созданном раннее репозитории **GitLab'а**, необходимо нажать на кнопу "**Clone**" и скопировать строку из варианта "**Clone With SSH**" как на примере ниже:

![[Pasted image 20231220125306.png]]

Далее, вводим команду `git clone` и после неё вставляем скопированную строку. должно получиться примерно так:

```sh
git clone ssh://git@gitlab.ysts.ru:4444/<group_name>/<project_name>.git
```

После исполнения данной команды **будет создана папка** c вашим репозиторием. Если мы перейдем в неё и пропишем `git config  --list`, то в строчках:
- user.name - будет указано Ваше имя пользователя из GitLab'a
- user.email - будет указана Ваша почта, используемая в GitLab'e

Ваш репозиторий настроен и готов к работе
### Отправка изменений в удаленный репозиторий и скачивание из удаленного репозитория

Мы связали локальный и удаленный (remote) репозитории. Отлично. Теперь нужно отправить на сервер изменения сделанные в вашем локальном репозитории.

Как только Вы внесли изменения в существующие файлы и/или добавили новые, необходимо ввести следующую очередность команд

```sh
git add . # добавляет в список к загрузке все вайлф в директории
git commit -m '<комментарий к коммиту>' # создаем коммит и добавляем к нему комментарий
git push # пушим изменения на удаленный репозиторий 
```

>[!warning]
>При самом первом пуше, команду `git push` следует заменить на `git -uf origin master`, чтобы указать что мы берем локальную ветку *origin* в удаленную ветку *master*
>

После этого в GitLab'e вы сможете увидеть новый файлы и информацию по проведенному коммиту.

Если же Вам нужны скачать репозиторий, в котором хранится более актуальная версия программы, необходимо прописать команду `git pull`, которая автоматически скачает все изменения из удаленного репозитория.

Вкратце - это вся основная информация по работе с **Git** и **GitLab'ом**.
## Дополнительная информация

Также, крайне рекомендую прочитать про работу следующих команд:

```sh
git help # справка по всем командам 
git clone # скачивание удаленного репозитория
git status # проверка состояния репозитория и/или ветки
git branch # информация и взаимодействие с ветками
git checkout # команда по смене активной веток
git merge # слияние веток
git remote # взаимоедйствие с удаленным репозиторием
git fetch # сравнение локального и удаленного репозитория
git push # отправка изменений на удаленный репозиторий
git pull # скачивание изменений из удаленного рпозитория
```

Также, Вам очень может помочь сайт-симуляция по работе с ветками: https://learngitbranching.js.org/?locale=ru_RU